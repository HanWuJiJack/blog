/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{102:function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function i(e,t){var r=e[0],i=e[1];return[r*Math.cos(t)-i*Math.sin(t),r*Math.sin(t)+i*Math.cos(t)]}function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof e[r]+" == typeof "+e[r]);return!0}var l=Math.PI;function c(e,t,r){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var a=e.rX,n=e.rY,s=e.x,u=e.y;a=Math.abs(e.rX),n=Math.abs(e.rY);var o=i([(t-s)/2,(r-u)/2],-e.xRot/180*l),c=o[0],h=o[1],p=Math.pow(c,2)/Math.pow(a,2)+Math.pow(h,2)/Math.pow(n,2);1<p&&(a*=Math.sqrt(p),n*=Math.sqrt(p)),e.rX=a,e.rY=n;var f=Math.pow(a,2)*Math.pow(h,2)+Math.pow(n,2)*Math.pow(c,2),d=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(a,2)*Math.pow(n,2)-f)/f)),v=a*h/n*d,m=-n*c/a*d,y=i([v,m],e.xRot/180*l);e.cX=y[0]+(t+s)/2,e.cY=y[1]+(r+u)/2,e.phi1=Math.atan2((h-m)/n,(c-v)/a),e.phi2=Math.atan2((-h-m)/n,(-c-v)/a),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*l),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*l),e.phi1*=180/l,e.phi2*=180/l}function s(e,t,r){a(e,t,r);var i=e*e+t*t-r*r;if(0>i)return[];if(0===i)return[[e*r/(e*e+t*t),t*r/(e*e+t*t)]];var n=Math.sqrt(i);return[[(e*r+t*n)/(e*e+t*t),(t*r-e*n)/(e*e+t*t)],[(e*r-t*n)/(e*e+t*t),(t*r+e*n)/(e*e+t*t)]]}var u,h=Math.PI/180;function f(e,t,r){return(1-r)*e+r*t}function d(e,t,r,i){return e+Math.cos(i/180*l)*t+Math.sin(i/180*l)*r}function p(e,t,r,i){var a=1e-6,n=t-e,o=r-t,s=3*n+3*(i-r)-6*o,u=6*(o-n),l=3*n;return Math.abs(s)<a?[-l/u]:function(e,t,r){void 0===r&&(r=1e-6);var i=e*e/4-t;if(i<-r)return[];if(i<=r)return[-e/2];var a=Math.sqrt(i);return[-e/2-a,-e/2+a]}(u/s,l/s,a)}function v(e,t,r,i,a){var n=1-a;return e*(n*n*n)+t*(3*n*n*a)+r*(3*n*a*a)+i*(a*a*a)}!function(e){function t(){return u((function(e,t,r){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=r),e.relative=!1),e}))}function r(){var e=NaN,t=NaN,r=NaN,i=NaN;return u((function(a,n,o){return a.type&M.SMOOTH_CURVE_TO&&(a.type=M.CURVE_TO,e=isNaN(e)?n:e,t=isNaN(t)?o:t,a.x1=a.relative?n-e:2*n-e,a.y1=a.relative?o-t:2*o-t),a.type&M.CURVE_TO?(e=a.relative?n+a.x2:a.x2,t=a.relative?o+a.y2:a.y2):(e=NaN,t=NaN),a.type&M.SMOOTH_QUAD_TO&&(a.type=M.QUAD_TO,r=isNaN(r)?n:r,i=isNaN(i)?o:i,a.x1=a.relative?n-r:2*n-r,a.y1=a.relative?o-i:2*o-i),a.type&M.QUAD_TO?(r=a.relative?n+a.x1:a.x1,i=a.relative?o+a.y1:a.y1):(r=NaN,i=NaN),a}))}function n(){var e=NaN,t=NaN;return u((function(r,i,a){if(r.type&M.SMOOTH_QUAD_TO&&(r.type=M.QUAD_TO,e=isNaN(e)?i:e,t=isNaN(t)?a:t,r.x1=r.relative?i-e:2*i-e,r.y1=r.relative?a-t:2*a-t),r.type&M.QUAD_TO){e=r.relative?i+r.x1:r.x1,t=r.relative?a+r.y1:r.y1;var n=r.x1,o=r.y1;r.type=M.CURVE_TO,r.x1=((r.relative?0:i)+2*n)/3,r.y1=((r.relative?0:a)+2*o)/3,r.x2=(r.x+2*n)/3,r.y2=(r.y+2*o)/3}else e=NaN,t=NaN;return r}))}function u(e){var t=0,r=0,i=NaN,a=NaN;return function(n){if(isNaN(i)&&!(n.type&M.MOVE_TO))throw new Error("path must start with moveto");var o=e(n,t,r,i,a);return n.type&M.CLOSE_PATH&&(t=i,r=a),void 0!==n.x&&(t=n.relative?t+n.x:n.x),void 0!==n.y&&(r=n.relative?r+n.y:n.y),n.type&M.MOVE_TO&&(i=t,a=r),o}}function o(e,t,r,i,n,o){return a(e,t,r,i,n,o),u((function(a,s,u,l){var c=a.x1,h=a.x2,p=a.relative&&!isNaN(l),f=void 0!==a.x?a.x:p?0:s,d=void 0!==a.y?a.y:p?0:u;function v(e){return e*e}a.type&M.HORIZ_LINE_TO&&0!==t&&(a.type=M.LINE_TO,a.y=a.relative?0:u),a.type&M.VERT_LINE_TO&&0!==r&&(a.type=M.LINE_TO,a.x=a.relative?0:s),void 0!==a.x&&(a.x=a.x*e+d*r+(p?0:n)),void 0!==a.y&&(a.y=f*t+a.y*i+(p?0:o)),void 0!==a.x1&&(a.x1=a.x1*e+a.y1*r+(p?0:n)),void 0!==a.y1&&(a.y1=c*t+a.y1*i+(p?0:o)),void 0!==a.x2&&(a.x2=a.x2*e+a.y2*r+(p?0:n)),void 0!==a.y2&&(a.y2=h*t+a.y2*i+(p?0:o));var m=e*i-t*r;if(void 0!==a.xRot&&(1!==e||0!==t||0!==r||1!==i))if(0===m)delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag,a.type=M.LINE_TO;else{var y=a.xRot*Math.PI/180,x=Math.sin(y),T=Math.cos(y),O=1/v(a.rX),C=1/v(a.rY),_=v(T)*O+v(x)*C,w=2*x*T*(O-C),E=v(x)*O+v(T)*C,S=_*i*i-w*t*i+E*t*t,R=w*(e*i+t*r)-2*(_*r*i+E*e*t),g=_*r*r-w*e*r+E*e*e,N=(Math.atan2(R,S-g)+Math.PI)%Math.PI/2,A=Math.sin(N),B=Math.cos(N);a.rX=Math.abs(m)/Math.sqrt(S*v(B)+R*A*B+g*v(A)),a.rY=Math.abs(m)/Math.sqrt(S*v(A)-R*A*B+g*v(B)),a.xRot=180*N/Math.PI}return void 0!==a.sweepFlag&&0>m&&(a.sweepFlag=+!a.sweepFlag),a}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),a(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return u((function(e,t,r){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=r),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),u((function(i,a,n,o,s){if(isNaN(o)&&!(i.type&M.MOVE_TO))throw new Error("path must start with moveto");return t&&i.type&M.HORIZ_LINE_TO&&(i.type=M.LINE_TO,i.y=i.relative?0:n),r&&i.type&M.VERT_LINE_TO&&(i.type=M.LINE_TO,i.x=i.relative?0:a),e&&i.type&M.CLOSE_PATH&&(i.type=M.LINE_TO,i.x=i.relative?o-a:o,i.y=i.relative?s-n:s),i.type&M.ARC&&(0===i.rX||0===i.rY)&&(i.type=M.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},e.NORMALIZE_ST=r,e.QT_TO_C=n,e.INFO=u,e.SANITIZE=function(e){void 0===e&&(e=0),a(e);var t=NaN,r=NaN,i=NaN,n=NaN;return u((function(a,o,s,u,l){var c=Math.abs,h=!1,p=0,f=0;if(a.type&M.SMOOTH_CURVE_TO&&(p=isNaN(t)?0:o-t,f=isNaN(r)?0:s-r),a.type&(M.CURVE_TO|M.SMOOTH_CURVE_TO)?(t=a.relative?o+a.x2:a.x2,r=a.relative?s+a.y2:a.y2):(t=NaN,r=NaN),a.type&M.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,n=isNaN(n)?s:2*s-n):a.type&M.QUAD_TO?(i=a.relative?o+a.x1:a.x1,n=a.relative?s+a.y1:a.y2):(i=NaN,n=NaN),a.type&M.LINE_COMMANDS||a.type&M.ARC&&(0===a.rX||0===a.rY||!a.lArcFlag)||a.type&M.CURVE_TO||a.type&M.SMOOTH_CURVE_TO||a.type&M.QUAD_TO||a.type&M.SMOOTH_QUAD_TO){var d=void 0===a.x?0:a.relative?a.x:a.x-o,v=void 0===a.y?0:a.relative?a.y:a.y-s;p=isNaN(i)?void 0===a.x1?p:a.relative?a.x:a.x1-o:i-o,f=isNaN(n)?void 0===a.y1?f:a.relative?a.y:a.y1-s:n-s;var m=void 0===a.x2?0:a.relative?a.x:a.x2-o,y=void 0===a.y2?0:a.relative?a.y:a.y2-s;c(d)<=e&&c(v)<=e&&c(p)<=e&&c(f)<=e&&c(m)<=e&&c(y)<=e&&(h=!0)}return a.type&M.CLOSE_PATH&&c(o-u)<=e&&c(s-l)<=e&&(h=!0),h?[]:a}))},e.MATRIX=o,e.ROTATE=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),a(e,t,r);var i=Math.sin(e),n=Math.cos(e);return o(n,i,-i,n,t-t*n+r*i,r-t*i-r*n)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),a(e,t),o(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),a(e,t),o(e,0,0,t,0,0)},e.SKEW_X=function(e){return a(e),o(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return a(e),o(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),a(e),o(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),a(e),o(1,0,0,-1,0,e)},e.A_TO_C=function(){return u((function(e,t,r){return M.ARC===e.type?function(e,t,r){var a,n,s,u;e.cX||c(e,t,r);for(var o=Math.min(e.phi1,e.phi2),p=Math.max(e.phi1,e.phi2)-o,l=Math.ceil(p/90),d=new Array(l),v=t,m=r,y=0;y<l;y++){var x=f(e.phi1,e.phi2,y/l),T=f(e.phi1,e.phi2,(y+1)/l),O=T-x,C=4/3*Math.tan(O*h/4),_=[Math.cos(x*h)-C*Math.sin(x*h),Math.sin(x*h)+C*Math.cos(x*h)],w=_[0],E=_[1],S=[Math.cos(T*h),Math.sin(T*h)],R=S[0],g=S[1],N=[R+C*Math.sin(T*h),g-C*Math.cos(T*h)],A=N[0],B=N[1];d[y]={relative:e.relative,type:M.CURVE_TO};var D=function(t,r){var a=i([t*e.rX,r*e.rY],e.xRot),n=a[0],o=a[1];return[e.cX+n,e.cY+o]};a=D(w,E),d[y].x1=a[0],d[y].y1=a[1],n=D(A,B),d[y].x2=n[0],d[y].y2=n[1],s=D(R,g),d[y].x=s[0],d[y].y=s[1],e.relative&&(d[y].x1-=v,d[y].y1-=m,d[y].x2-=v,d[y].y2-=m,d[y].x-=v,d[y].y-=m),v=(u=[d[y].x,d[y].y])[0],m=u[1]}return d}(e,e.relative?0:t,e.relative?0:r):e}))},e.ANNOTATE_ARCS=function(){return u((function(e,t,r){return e.relative&&(t=0,r=0),M.ARC===e.type&&c(e,t,r),e}))},e.CLONE=function(){return function(e){var t={};for(var r in e)t[r]=e[r];return t}},e.CALCULATE_BOUNDS=function(){var i=t(),a=n(),e=r(),o=u((function(t,r,n){var u=e(a(i(function(e){var t={};for(var r in e)t[r]=e[r];return t}(t))));function l(e){e>o.maxX&&(o.maxX=e),e<o.minX&&(o.minX=e)}function h(e){e>o.maxY&&(o.maxY=e),e<o.minY&&(o.minY=e)}if(u.type&M.DRAWING_COMMANDS&&(l(r),h(n)),u.type&M.HORIZ_LINE_TO&&l(u.x),u.type&M.VERT_LINE_TO&&h(u.y),u.type&M.LINE_TO&&(l(u.x),h(u.y)),u.type&M.CURVE_TO){l(u.x),h(u.y);for(var f=0,m=p(r,u.x1,u.x2,u.x);f<m.length;f++)0<(j=m[f])&&1>j&&l(v(r,u.x1,u.x2,u.x,j));for(var y=0,x=p(n,u.y1,u.y2,u.y);y<x.length;y++)0<(j=x[y])&&1>j&&h(v(n,u.y1,u.y2,u.y,j))}if(u.type&M.ARC){l(u.x),h(u.y),c(u,r,n);for(var T=u.xRot/180*Math.PI,O=Math.cos(T)*u.rX,C=Math.sin(T)*u.rX,_=-Math.sin(T)*u.rY,w=Math.cos(T)*u.rY,E=u.phi1<u.phi2?[u.phi1,u.phi2]:-180>u.phi2?[u.phi2+360,u.phi1+360]:[u.phi2,u.phi1],S=E[0],g=E[1],R=function(e){var t=e[0],r=e[1],i=180*Math.atan2(r,t)/Math.PI;return i<S?i+360:i},N=0,A=s(_,-O,0).map(R);N<A.length;N++)(j=A[N])>S&&j<g&&l(d(u.cX,O,_,j));for(var B=0,D=s(w,-C,0).map(R);B<D.length;B++){var j;(j=D[B])>S&&j<g&&h(d(u.cY,C,w,j))}}return t}));return o.minX=1/0,o.maxX=-1/0,o.minY=1/0,o.maxY=-1/0,o}}(u||(u={}));var m,y=function(){function e(){}return e.prototype.round=function(e){return this.transform(u.ROUND(e))},e.prototype.toAbs=function(){return this.transform(u.TO_ABS())},e.prototype.toRel=function(){return this.transform(u.TO_REL())},e.prototype.normalizeHVZ=function(e,t,r){return this.transform(u.NORMALIZE_HVZ(e,t,r))},e.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},e.prototype.aToC=function(){return this.transform(u.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(u.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(u.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(u.SCALE(e,t))},e.prototype.rotate=function(e,t,r){return this.transform(u.ROTATE(e,t,r))},e.prototype.matrix=function(e,t,r,i,a,n){return this.transform(u.MATRIX(e,t,r,i,a,n))},e.prototype.skewX=function(e){return this.transform(u.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(u.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(u.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(u.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},e}(),x=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},T=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},O=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return o(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var r=this;void 0===t&&(t=[]);for(var i=function(e){t.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},a=0;a<e.length;a++){var n=e[a],o=!(this.curCommandType!==M.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=T(n)&&("0"===this.curNumber&&"0"===n||o);if(!T(n)||s)if("e"!==n&&"E"!==n)if("-"!==n&&"+"!==n||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==n||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===M.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+a+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"');this.curArgs.push(u),this.curArgs.length===C[this.curCommandType]&&(M.HORIZ_LINE_TO===this.curCommandType?i({type:M.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):M.VERT_LINE_TO===this.curCommandType?i({type:M.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===M.MOVE_TO||this.curCommandType===M.LINE_TO||this.curCommandType===M.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),M.MOVE_TO===this.curCommandType&&(this.curCommandType=M.LINE_TO)):this.curCommandType===M.CURVE_TO?i({type:M.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===M.SMOOTH_CURVE_TO?i({type:M.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===M.QUAD_TO?i({type:M.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===M.ARC&&i({type:M.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!x(n))if(","===n&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==n&&"-"!==n&&"."!==n)if(s)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+n+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==n&&"Z"!==n)if("h"===n||"H"===n)this.curCommandType=M.HORIZ_LINE_TO,this.curCommandRelative="h"===n;else if("v"===n||"V"===n)this.curCommandType=M.VERT_LINE_TO,this.curCommandRelative="v"===n;else if("m"===n||"M"===n)this.curCommandType=M.MOVE_TO,this.curCommandRelative="m"===n;else if("l"===n||"L"===n)this.curCommandType=M.LINE_TO,this.curCommandRelative="l"===n;else if("c"===n||"C"===n)this.curCommandType=M.CURVE_TO,this.curCommandRelative="c"===n;else if("s"===n||"S"===n)this.curCommandType=M.SMOOTH_CURVE_TO,this.curCommandRelative="s"===n;else if("q"===n||"Q"===n)this.curCommandType=M.QUAD_TO,this.curCommandRelative="q"===n;else if("t"===n||"T"===n)this.curCommandType=M.SMOOTH_QUAD_TO,this.curCommandRelative="t"===n;else{if("a"!==n&&"A"!==n)throw new SyntaxError('Unexpected character "'+n+'" at index '+a+".");this.curCommandType=M.ARC,this.curCommandRelative="a"===n}else t.push({type:M.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal="."===n}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,r){void 0===r&&(r=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,t);i<a.length;i++){var n=a[i],o=e(n);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return r}}})},t}(y),M=function(e){function i(t){var r=e.call(this)||this;return r.commands="string"==typeof t?i.parse(t):t,r}return o(i,e),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var e=u.CALCULATE_BOUNDS();return this.transform(e),e},i.prototype.transform=function(e){for(var t=[],r=0,i=this.commands;r<i.length;r++){var a=e(i[r]);Array.isArray(a)?t.push.apply(t,a):t.push(a)}return this.commands=t,this},i.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var i=e[r];if(i.type===M.CLOSE_PATH)t+="z";else if(i.type===M.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===M.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===M.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===M.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===M.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===M.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===M.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===M.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==M.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+r+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}(e)},i.parse=function(e){var t=new O,r=[];return t.parse(e,r),t.finish(r),r},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(y),C=((m={})[M.MOVE_TO]=2,m[M.LINE_TO]=2,m[M.HORIZ_LINE_TO]=1,m[M.VERT_LINE_TO]=1,m[M.CLOSE_PATH]=0,m[M.QUAD_TO]=4,m[M.SMOOTH_QUAD_TO]=2,m[M.CURVE_TO]=6,m[M.SMOOTH_CURVE_TO]=4,m[M.ARC]=7,m)},150:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"}},155:function(e,t,r){"use strict";r.d(t,"b",(function(){return M})),r.d(t,"a",(function(){return w}));r(89);var n=r(0),o=r(1),l=r(40),c=r(4),h=r(3),f=r(2),d=(r(69),r(15),r(26),r(31),r(330),r(344),r(32),r(5));function v(e,t,r){return t=Object(h.a)(t),Object(l.a)(e,m()?Reflect.construct(t,r||[],Object(h.a)(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}var y=new d.F,x=new d.u,T=new d.F,O=function(e){function t(){var e,element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return Object(n.a)(this,t),(e=v(this,t)).isCSS3DObject=!0,e.element=element,e.element.style.position="absolute",e.element.style.pointerEvents="auto",e.element.style.userSelect="none",e.element.setAttribute("draggable",!1),e.addEventListener("removed",(function(){this.traverse((function(object){object.element instanceof Element&&null!==object.element.parentNode&&object.element.parentNode.removeChild(object.element)}))})),e}return Object(f.a)(t,e),Object(o.a)(t,[{key:"copy",value:function(source,e){return Object(c.a)(Object(h.a)(t.prototype),"copy",this).call(this,source,e),this.element=source.element.cloneNode(!0),this}}]),t}(d.q),M=function(e){function t(element){var e;return Object(n.a)(this,t),(e=v(this,t,[element])).isCSS3DSprite=!0,e.rotation2D=0,e}return Object(f.a)(t,e),Object(o.a)(t,[{key:"copy",value:function(source,e){return Object(c.a)(Object(h.a)(t.prototype),"copy",this).call(this,source,e),this.rotation2D=source.rotation2D,this}}]),t}(O),C=new d.l,_=new d.l,w=Object(o.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r,o,l,c,h=this,f={camera:{style:""},objects:new WeakMap},d=void 0!==t.element?t.element:document.createElement("div");d.style.overflow="hidden",this.domElement=d;var v=document.createElement("div");v.style.transformOrigin="0 0",v.style.pointerEvents="none",d.appendChild(v);var m=document.createElement("div");function O(e){return Math.abs(e)<1e-10?0:e}function M(e){var t=e.elements;return"matrix3d("+O(t[0])+","+O(-t[1])+","+O(t[2])+","+O(t[3])+","+O(t[4])+","+O(-t[5])+","+O(t[6])+","+O(t[7])+","+O(t[8])+","+O(-t[9])+","+O(t[10])+","+O(t[11])+","+O(t[12])+","+O(-t[13])+","+O(t[14])+","+O(t[15])+")"}function w(e){var t=e.elements;return"translate(-50%,-50%)"+("matrix3d("+O(t[0])+","+O(t[1])+","+O(t[2])+","+O(t[3])+","+O(-t[4])+","+O(-t[5])+","+O(-t[6])+","+O(-t[7])+","+O(t[8])+","+O(t[9])+","+O(t[10])+","+O(t[11])+","+O(t[12])+","+O(t[13])+","+O(t[14])+","+O(t[15])+")")}function E(object,e,t,r){if(object.isCSS3DObject){var n=!0===object.visible&&!0===object.layers.test(t.layers);if(object.element.style.display=!0===n?"":"none",!0===n){var style;object.onBeforeRender(h,e,t),object.isCSS3DSprite?(C.copy(t.matrixWorldInverse),C.transpose(),0!==object.rotation2D&&C.multiply(_.makeRotationZ(object.rotation2D)),object.matrixWorld.decompose(y,x,T),C.setPosition(y),C.scale(T),C.elements[3]=0,C.elements[7]=0,C.elements[11]=0,C.elements[15]=1,style=w(C)):style=w(object.matrixWorld);var element=object.element,o=f.objects.get(object);if(void 0===o||o.style!==style){element.style.transform=style;var l={style:style};f.objects.set(object,l)}element.parentNode!==m&&m.appendChild(element),object.onAfterRender(h,e,t)}}for(var i=0,c=object.children.length;i<c;i++)E(object.children[i],e,t,r)}m.style.transformStyle="preserve-3d",v.appendChild(m),this.getSize=function(){return{width:r,height:o}},this.render=function(e,t){var n,h,d=t.projectionMatrix.elements[5]*c;t.view&&t.view.enabled?(v.style.transform="translate( ".concat(-t.view.offsetX*(r/t.view.width),"px, ").concat(-t.view.offsetY*(o/t.view.height),"px )"),v.style.transform+="scale( ".concat(t.view.fullWidth/t.view.width,", ").concat(t.view.fullHeight/t.view.height," )")):v.style.transform="",!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),t.isOrthographicCamera&&(n=-(t.right+t.left)/2,h=(t.top+t.bottom)/2);var y=t.view&&t.view.enabled?t.view.height/t.view.fullHeight:1,x=t.isOrthographicCamera?"scale( ".concat(y," )")+"scale("+d+")translate("+O(n)+"px,"+O(h)+"px)"+M(t.matrixWorldInverse):"scale( ".concat(y," )")+"translateZ("+d+"px)"+M(t.matrixWorldInverse),style=(t.isPerspectiveCamera?"perspective("+d+"px) ":"")+x+"translate("+l+"px,"+c+"px)";f.camera.style!==style&&(m.style.transform=style,f.camera.style=style),E(e,e,t,x)},this.setSize=function(e,t){l=(r=e)/2,c=(o=t)/2,d.style.width=e+"px",d.style.height=t+"px",v.style.width=e+"px",v.style.height=t+"px",m.style.width=e+"px",m.style.height=t+"px"}}))},294:function(e,t,r){"use strict";function n(e,t){return t=t||{},new Promise((function(r,n){var s=new XMLHttpRequest,o=[],u={},a=function e(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:e,headers:{keys:function(){return o},entries:function(){return o.map((function(e){return[e,s.getResponseHeader(e)]}))},get:function(e){return s.getResponseHeader(e)},has:function(e){return null!=s.getResponseHeader(e)}}}};for(var i in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,(function(e,t){u[t]||o.push(u[t]=t)})),r(a())},s.onerror=n,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(i,t.headers[i]);s.send(t.body||null)}))}r.d(t,"a",(function(){return n}))},304:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r(15),r(89);var n=r(0),o=r(1),l=r(40),c=r(3),h=r(2),f=r(5);function d(e,t,r){return t=Object(c.a)(t),Object(l.a)(e,v()?Reflect.construct(t,r||[],Object(c.a)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(e){function t(e,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(n.a)(this,t),(o=d(this,t)).scene=e,o.camera=r,o.overrideMaterial=l,o.clearColor=c,o.clearAlpha=h,o.clear=!0,o.clearDepth=!1,o.needsSwap=!1,o._oldClearColor=new f.g,o}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e,t,r){var n,o,l=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(n),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=l}}]),t}(r(52).b)},305:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));r(89);var n=r(0),o=r(1),l=r(40),c=r(3),h=r(2),f=(r(25),r(329),r(15),r(26),r(31),r(57),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),r(340),r(341),r(342),r(343),r(32),r(5)),d=r(52),v=r(150);function m(e,t,r){return t=Object(c.a)(t),Object(l.a)(e,y()?Reflect.construct(t,r||[],Object(c.a)(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var x=function(e){function t(e,r,o,l){var c;Object(n.a)(this,t),(c=m(this,t)).renderScene=r,c.renderCamera=o,c.selectedObjects=void 0!==l?l:[],c.visibleEdgeColor=new f.g(1,1,1),c.hiddenEdgeColor=new f.g(.1,.04,.02),c.edgeGlow=0,c.usePatternTexture=!1,c.edgeThickness=1,c.edgeStrength=3,c.downSampleRatio=2,c.pulsePeriod=0,c._visibilityCache=new Map,c.resolution=void 0!==e?new f.E(e.x,e.y):new f.E(256,256);var h=Math.round(c.resolution.x/c.downSampleRatio),y=Math.round(c.resolution.y/c.downSampleRatio);c.renderTargetMaskBuffer=new f.G(c.resolution.x,c.resolution.y),c.renderTargetMaskBuffer.texture.name="OutlinePass.mask",c.renderTargetMaskBuffer.texture.generateMipmaps=!1,c.depthMaterial=new f.n,c.depthMaterial.side=f.h,c.depthMaterial.depthPacking=f.v,c.depthMaterial.blending=f.p,c.prepareMaskMaterial=c.getPrepareMaskMaterial(),c.prepareMaskMaterial.side=f.h,c.prepareMaskMaterial.fragmentShader=function(e,t){var r=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,r+"DepthToViewZ")}(c.prepareMaskMaterial.fragmentShader,c.renderCamera),c.renderTargetDepthBuffer=new f.G(c.resolution.x,c.resolution.y,{type:f.j}),c.renderTargetDepthBuffer.texture.name="OutlinePass.depth",c.renderTargetDepthBuffer.texture.generateMipmaps=!1,c.renderTargetMaskDownSampleBuffer=new f.G(h,y,{type:f.j}),c.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",c.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,c.renderTargetBlurBuffer1=new f.G(h,y,{type:f.j}),c.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",c.renderTargetBlurBuffer1.texture.generateMipmaps=!1,c.renderTargetBlurBuffer2=new f.G(Math.round(h/2),Math.round(y/2),{type:f.j}),c.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",c.renderTargetBlurBuffer2.texture.generateMipmaps=!1,c.edgeDetectionMaterial=c.getEdgeDetectionMaterial(),c.renderTargetEdgeBuffer1=new f.G(h,y,{type:f.j}),c.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",c.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,c.renderTargetEdgeBuffer2=new f.G(Math.round(h/2),Math.round(y/2),{type:f.j}),c.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",c.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;c.separableBlurMaterial1=c.getSeperableBlurMaterial(4),c.separableBlurMaterial1.uniforms.texSize.value.set(h,y),c.separableBlurMaterial1.uniforms.kernelRadius.value=1,c.separableBlurMaterial2=c.getSeperableBlurMaterial(4),c.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(h/2),Math.round(y/2)),c.separableBlurMaterial2.uniforms.kernelRadius.value=4,c.overlayMaterial=c.getOverlayMaterial();var x=v.a;return c.copyUniforms=f.D.clone(x.uniforms),c.materialCopy=new f.y({uniforms:c.copyUniforms,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,blending:f.p,depthTest:!1,depthWrite:!1}),c.enabled=!0,c.needsSwap=!1,c._oldClearColor=new f.g,c.oldClearAlpha=1,c.fsQuad=new d.a(null),c.tempPulseColor1=new f.g,c.tempPulseColor2=new f.g,c.textureMatrix=new f.l,c}return Object(h.a)(t,e),Object(o.a)(t,[{key:"dispose",value:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}},{key:"setSize",value:function(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);var r=Math.round(e/this.downSampleRatio),n=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,n),this.renderTargetBlurBuffer1.setSize(r,n),this.renderTargetEdgeBuffer1.setSize(r,n),this.separableBlurMaterial1.uniforms.texSize.value.set(r,n),r=Math.round(r/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(r,n),this.renderTargetEdgeBuffer2.setSize(r,n),this.separableBlurMaterial2.uniforms.texSize.value.set(r,n)}},{key:"changeVisibilityOfSelectedObjects",value:function(e){var t=this._visibilityCache;function r(object){object.isMesh&&(!0===e?object.visible=t.get(object):(t.set(object,object.visible),object.visible=e))}for(var i=0;i<this.selectedObjects.length;i++){this.selectedObjects[i].traverse(r)}}},{key:"changeVisibilityOfNonSelectedObjects",value:function(e){var t=this._visibilityCache,r=[];function n(object){object.isMesh&&r.push(object)}for(var i=0;i<this.selectedObjects.length;i++){this.selectedObjects[i].traverse(n)}this.renderScene.traverse((function(object){if(object.isMesh||object.isSprite){for(var n=!1,o=0;o<r.length;o++){if(r[o].id===object.id){n=!0;break}}if(!1===n){var l=object.visible;!1!==e&&!0!==t.get(object)||(object.visible=e),t.set(object,l)}}else(object.isPoints||object.isLine)&&(!0===e?object.visible=t.get(object):(t.set(object,object.visible),object.visible=e))}))}},{key:"updateTextureMatrix",value:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}},{key:"render",value:function(e,r,n,o,l){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var c=e.autoClear;e.autoClear=!1,l&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var h=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=h,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var f=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(f),this.tempPulseColor2.multiplyScalar(f)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=t.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=t.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=t.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=t.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,l&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=c}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}},{key:"getPrepareMaskMaterial",value:function(){return new f.y({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new f.E(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}},{key:"getEdgeDetectionMaterial",value:function(){return new f.y({uniforms:{maskTexture:{value:null},texSize:{value:new f.E(.5,.5)},visibleEdgeColor:{value:new f.F(1,1,1)},hiddenEdgeColor:{value:new f.F(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}},{key:"getSeperableBlurMaterial",value:function(e){return new f.y({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new f.E(.5,.5)},direction:{value:new f.E(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}},{key:"getOverlayMaterial",value:function(){return new f.y({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:f.a,depthTest:!1,depthWrite:!1,transparent:!0})}}]),t}(d.b);x.BlurDirectionX=new f.E(1,0),x.BlurDirectionY=new f.E(0,1)},306:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,"a",(function(){return h}));var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function c(canvas,e,t,r,o){if("string"==typeof canvas&&(canvas=document.getElementById(canvas)),!canvas||"object"!==n(canvas)||!("getContext"in canvas))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var l=canvas.getContext("2d");try{return l.getImageData(e,t,r,o)}catch(e){throw new Error("unable to access image data: "+e)}}function h(canvas,e,t,r,n,h){if(!(isNaN(h)||h<1)){h|=0;var d=c(canvas,e,t,r,n);d=function(e,t,r,n,c,h){for(var d,v=e.data,div=2*h+1,m=n-1,y=c-1,x=h+1,T=x*(x+1)/2,O=new f,M=O,i=1;i<div;i++)M=M.next=new f,i===x&&(d=M);M.next=O;for(var C=null,_=null,w=0,E=0,S=o[h],R=l[h],N=0;N<c;N++){M=O;for(var A=v[E],B=v[E+1],D=v[E+2],j=v[E+3],k=0;k<x;k++)M.r=A,M.g=B,M.b=D,M.a=j,M=M.next;for(var P=0,I=0,U=0,L=0,H=x*A,V=x*B,F=x*D,Q=x*j,X=T*A,z=T*B,Y=T*D,Z=T*j,W=1;W<x;W++){var p=E+((m<W?m:W)<<2),G=v[p],g=v[p+1],b=v[p+2],a=v[p+3],K=x-W;X+=(M.r=G)*K,z+=(M.g=g)*K,Y+=(M.b=b)*K,Z+=(M.a=a)*K,P+=G,I+=g,U+=b,L+=a,M=M.next}C=O,_=d;for(var J=0;J<n;J++){var $=Z*S>>>R;if(v[E+3]=$,0!==$){var ee=255/$;v[E]=(X*S>>>R)*ee,v[E+1]=(z*S>>>R)*ee,v[E+2]=(Y*S>>>R)*ee}else v[E]=v[E+1]=v[E+2]=0;X-=H,z-=V,Y-=F,Z-=Q,H-=C.r,V-=C.g,F-=C.b,Q-=C.a;var te=J+h+1;te=w+(te<m?te:m)<<2,X+=P+=C.r=v[te],z+=I+=C.g=v[te+1],Y+=U+=C.b=v[te+2],Z+=L+=C.a=v[te+3],C=C.next;var re=_,ne=re.r,ae=re.g,ie=re.b,se=re.a;H+=ne,V+=ae,F+=ie,Q+=se,P-=ne,I-=ae,U-=ie,L-=se,_=_.next,E+=4}w+=n}for(var oe=0;oe<n;oe++){var ue=v[E=oe<<2],le=v[E+1],ce=v[E+2],he=v[E+3],fe=x*ue,de=x*le,ve=x*ce,pe=x*he,me=T*ue,ge=T*le,ye=T*ce,xe=T*he;M=O;for(var Te=0;Te<x;Te++)M.r=ue,M.g=le,M.b=ce,M.a=he,M=M.next;for(var Oe=n,be=0,Me=0,Ce=0,_e=0,we=1;we<=h;we++){E=Oe+oe<<2;var Ee=x-we;me+=(M.r=ue=v[E])*Ee,ge+=(M.g=le=v[E+1])*Ee,ye+=(M.b=ce=v[E+2])*Ee,xe+=(M.a=he=v[E+3])*Ee,_e+=ue,be+=le,Me+=ce,Ce+=he,M=M.next,we<y&&(Oe+=n)}E=oe,C=O,_=d;for(var Se=0;Se<c;Se++){var Re=E<<2;v[Re+3]=he=xe*S>>>R,he>0?(he=255/he,v[Re]=(me*S>>>R)*he,v[Re+1]=(ge*S>>>R)*he,v[Re+2]=(ye*S>>>R)*he):v[Re]=v[Re+1]=v[Re+2]=0,me-=fe,ge-=de,ye-=ve,xe-=pe,fe-=C.r,de-=C.g,ve-=C.b,pe-=C.a,Re=oe+((Re=Se+x)<y?Re:y)*n<<2,me+=_e+=C.r=v[Re],ge+=be+=C.g=v[Re+1],ye+=Me+=C.b=v[Re+2],xe+=Ce+=C.a=v[Re+3],C=C.next,fe+=ue=_.r,de+=le=_.g,ve+=ce=_.b,pe+=he=_.a,_e-=ue,be-=le,Me-=ce,Ce-=he,_=_.next,E+=n}}return e}(d,0,0,r,n,h),canvas.getContext("2d").putImageData(d,e,t)}}var f=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},311:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n=r(0),o=r(1),l=(r(140),r(25),r(5)),c=r(150),h=(r(15),r(89),r(40)),f=r(3),d=r(2),v=r(52);function m(e,t,r){return t=Object(f.a)(t),Object(h.a)(e,y()?Reflect.construct(t,r||[],Object(f.a)(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var x=function(e){function t(e,r){var o;return Object(n.a)(this,t),(o=m(this,t)).textureID=void 0!==r?r:"tDiffuse",e instanceof l.y?(o.uniforms=e.uniforms,o.material=e):e&&(o.uniforms=l.D.clone(e.uniforms),o.material=new l.y({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:o.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),o.fsQuad=new v.a(o.material),o}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}},{key:"dispose",value:function(){this.material.dispose(),this.fsQuad.dispose()}}]),t}(v.b);function T(e,t,r){return t=Object(f.a)(t),Object(h.a)(e,O()?Reflect.construct(t,r||[],Object(f.a)(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}var M=function(e){function t(e,r){var o;return Object(n.a)(this,t),(o=T(this,t)).scene=e,o.camera=r,o.clear=!0,o.needsSwap=!1,o.inverse=!1,o}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e,t,r){var n,o,l=e.getContext(),c=e.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(n=0,o=1):(n=1,o=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(l.REPLACE,l.REPLACE,l.REPLACE),c.buffers.stencil.setFunc(l.ALWAYS,n,4294967295),c.buffers.stencil.setClear(o),c.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.color.setMask(!0),c.buffers.depth.setMask(!0),c.buffers.stencil.setLocked(!1),c.buffers.stencil.setFunc(l.EQUAL,1,4294967295),c.buffers.stencil.setOp(l.KEEP,l.KEEP,l.KEEP),c.buffers.stencil.setLocked(!0)}}]),t}(v.b),C=function(e){function t(){var e;return Object(n.a)(this,t),(e=T(this,t)).needsSwap=!1,e}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}]),t}(v.b),_=function(){function e(t,r){if(Object(n.a)(this,e),this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===r){var o=t.getSize(new l.E);this._width=o.width,this._height=o.height,(r=new l.G(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:l.j})).texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new x(c.a),this.copyPass.material.blending=l.p,this.clock=new l.f}return Object(o.a)(e,[{key:"swapBuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}},{key:"addPass",value:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(e){var t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}},{key:"isLastEnabledPass",value:function(e){for(var i=e+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}},{key:"render",value:function(e){void 0===e&&(e=this.clock.getDelta());for(var t=this.renderer.getRenderTarget(),r=!1,i=0,n=this.passes.length;i<n;i++){var o=this.passes[i];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){var l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==M&&(o instanceof M?r=!0:o instanceof C&&(r=!1))}}this.renderer.setRenderTarget(t)}},{key:"reset",value:function(e){if(void 0===e){var t=this.renderer.getSize(new l.E);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(e,t){this._width=e,this._height=t;var r=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(r,n),this.renderTarget2.setSize(r,n);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(r,n)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},{key:"dispose",value:function(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}]),e}()},52:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return T}));r(15),r(89);var n=r(40),o=r(3),l=r(2),c=r(0),h=r(1),f=r(5);function d(e,t,r){return t=Object(o.a)(t),Object(n.a)(e,v()?Reflect.construct(t,r||[],Object(o.a)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(){function e(){Object(c.a)(this,e),this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return Object(h.a)(e,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},{key:"dispose",value:function(){}}]),e}(),y=new f.r(-1,1,1,-1,0,1),x=new(function(e){function t(){var e;return Object(c.a)(this,t),(e=d(this,t)).setAttribute("position",new f.i([-1,3,0,-1,-1,0,3,-1,0],3)),e.setAttribute("uv",new f.i([0,2,0,0,2,0],2)),e}return Object(l.a)(t,e),Object(h.a)(t)}(f.e)),T=function(){function e(t){Object(c.a)(this,e),this._mesh=new f.m(x,t)}return Object(h.a)(e,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,y)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}]),e}()},60:function(e,t,r){"use strict";r.d(t,"a",(function(){return le})),r.d(t,"b",(function(){return oe})),r.d(t,"c",(function(){return ue})),r.d(t,"d",(function(){return ie})),r.d(t,"e",(function(){return ne}));r(0),r(1);var n=r(27),o=(r(21),r(7)),l=r(193);r(46),r(70),r(69),r(50),r(93),r(49),r(38),r(140),r(73),r(74),r(53),r(15),r(71),r(72),r(25),r(26),r(250),r(31),r(141),r(51),r(57),r(249),r(183),r(37),r(32),r(251);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var v=/[^\0-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow Error","not-basic":"Illegal Input","invalid-input":"Invalid Input"},x=Math.floor,T=String.fromCharCode;function s(e){throw new RangeError(y[e])}var O=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},u=function(e,t,r){var n=0;for(e=r?x(e/700):e>>1,e+=x(e/t);e>455;n+=36)e=x(e/35);return x(n+36*e/(e+38))};function M(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(m,".")).split("."),(function(e){return v.test(e)?"xn--"+function(e){var t,r=[],n=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var l=e.charCodeAt(r++);56320==(64512&l)?t.push(((1023&o)<<10)+(1023&l)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,o=128,i=0,l=72,c=f(e);try{for(c.s();!(t=c.n()).done;){var h=t.value;h<128&&r.push(T(h))}}catch(e){c.e(e)}finally{c.f()}var d=r.length,p=d;for(d&&r.push("-");p<n;){var v,m=2147483647,y=f(e);try{for(y.s();!(v=y.n()).done;){var M=v.value;M>=o&&M<m&&(m=M)}}catch(e){y.e(e)}finally{y.f()}var a=p+1;m-o>x((2147483647-i)/a)&&s("overflow"),i+=(m-o)*a,o=m;var C,_=f(e);try{for(_.s();!(C=_.n()).done;){var w=C.value;if(w<o&&++i>2147483647&&s("overflow"),w==o){for(var E=i,S=36;;S+=36){var R=S<=l?1:S>=l+26?26:S-l;if(E<R)break;var N=E-R,A=36-R;r.push(T(O(R+N%A,0))),E=x(N/A)}r.push(T(O(E,0))),l=u(i,a,p==d),i=0,++p}}}catch(e){_.e(e)}finally{_.f()}++i,++o}return r.join("")}(e):e})).join(".");return n+o}(e)}var C=/#/g,_=/&/g,w=/\//g,E=/=/g,S=/\?/g,R=/\+/g,N=/%5e/gi,A=/%60/gi,B=/%7b/gi,D=/%7c/gi,j=/%7d/gi,k=/%20/gi,P=/%2f/gi,I=/%252f/gi;function U(text){return encodeURI(""+text).replace(D,"|")}function L(text){return U(text).replace(B,"{").replace(j,"}").replace(N,"^")}function H(input){return U("string"==typeof input?input:JSON.stringify(input)).replace(R,"%2B").replace(k,"+").replace(C,"%23").replace(_,"%26").replace(A,"`").replace(N,"^").replace(w,"%2F")}function V(text){return H(text).replace(E,"%3D")}function F(text){return U(text).replace(C,"%23").replace(S,"%3F").replace(I,"%2F").replace(_,"%26").replace(R,"%2B")}function Q(){var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return decodeURIComponent(""+text)}catch(e){return""+text}}function X(text){return Q(text.replace(P,"%252F"))}function z(text){return Q(text.replace(R," "))}function Y(){return M(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",object={};"?"===e[0]&&(e=e.slice(1));var t,r=f(e.split("&"));try{for(r.s();!(t=r.n()).done;){var n=t.value.match(/([^=]+)=?(.*)/)||[];if(!(n.length<2)){var o=Q(n[1].replace(R," "));if("__proto__"!==o&&"constructor"!==o){var l=z(n[2]||"");void 0===object[o]?object[o]=l:Array.isArray(object[o])?object[o].push(l):object[o]=[object[o],l]}}}}catch(e){r.e(e)}finally{r.f()}return object}function W(e){return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return r=t,"number"!=typeof(n=e[t])&&"boolean"!=typeof n||(n=String(n)),n?Array.isArray(n)?n.map((function(e){return"".concat(V(r),"=").concat(H(e))})).join("&"):"".concat(V(r),"=").concat(H(n)):V(r);var r,n})).filter(Boolean).join("&")}var G=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,K=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,J=/^([/\\]\s*){2,}[^/\\]/,$=/\/$|\/\?|\/#/,ee=/^\.?\//;function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?G.test(e):K.test(e)||!!t.acceptRelative&&J.test(e)}function re(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(arguments.length>1?arguments[1]:void 0)?$.test(input):input.endsWith("/")}function ne(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!(arguments.length>1?arguments[1]:void 0))return(re(input)?input.slice(0,-1):input)||"/";if(!re(input,!0))return input||"/";var path=input,e="",t=input.indexOf("#");t>=0&&(path=input.slice(0,t),e=input.slice(t));var r=path.split("?"),n=Object(l.a)(r),o=n[0],s=n.slice(1);return(o.slice(0,-1)||"/")+(s.length>0?"?".concat(s.join("?")):"")+e}function ae(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!(arguments.length>1?arguments[1]:void 0))return input.endsWith("/")?input:input+"/";if(re(input,!0))return input||"/";var path=input,e="",t=input.indexOf("#");if(t>=0&&(path=input.slice(0,t),e=input.slice(t),!path))return e;var r=path.split("?"),n=Object(l.a)(r),o=n[0],s=n.slice(1);return o+"/"+(s.length>0?"?".concat(s.join("?")):"")+e}function ie(input,e){var t=he(input),r=h(h({},Z(t.search)),e);return t.search=W(r),de(t)}function se(e){return e&&"/"!==e}function oe(base){for(var e=base||"",t=arguments.length,input=new Array(t>1?t-1:0),r=1;r<t;r++)input[r-1]=arguments[r];var n,o=f(input.filter((function(e){return se(e)})));try{for(o.s();!(n=o.n()).done;){var l=n.value;if(e){var c=l.replace(ee,"");e=ae(e)+c}else e=l}}catch(e){o.e(e)}finally{o.f()}return e}function ue(input){var e=he(input);return e.pathname=F(X(e.pathname)),e.hash=L(Q(e.hash)),e.host=Y(Q(e.host)),e.search=W(Z(e.search)),de(e)}function le(e,t){return Q(ne(e))===Q(ne(t))}var ce=Symbol.for("ufo:protocolRelative");function he(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,t=input.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){var r=Object(n.a)(t,3),l=r[1],c=r[2],h=void 0===c?"":c;return{protocol:l.toLowerCase(),pathname:h,href:l+h,auth:"",host:"",search:"",hash:""}}if(!te(input,{acceptRelative:!0}))return e?he(e+input):fe(input);var f=input.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],d=Object(n.a)(f,4),v=d[1],m=void 0===v?"":v,y=d[2],x=d[3],T=(void 0===x?"":x).match(/([^#/?]*)(.*)?/)||[],O=Object(n.a)(T,3),M=O[1],C=void 0===M?"":M,_=O[2],w=fe((void 0===_?"":_).replace(/\/(?=[A-Za-z]:)/,"")),E=w.pathname,S=w.search,R=w.hash;return Object(o.a)({protocol:m.toLowerCase(),auth:y?y.slice(0,Math.max(0,y.length-1)):"",host:C,pathname:E,search:S,hash:R},ce,!m)}function fe(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1),t=Object(n.a)(e,3),r=t[0],o=void 0===r?"":r,l=t[1],c=void 0===l?"":l,h=t[2];return{pathname:o,search:c,hash:void 0===h?"":h}}function de(e){var t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",n=e.hash||"",o=e.auth?e.auth+"@":"",l=e.host||"";return(e.protocol||e[ce]?(e.protocol||"")+"//":"")+o+l+t+r+n}Object.defineProperty}}]);