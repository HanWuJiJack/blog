(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{732:function(t,e,o){"use strict";var n=o(11),r=o(0),d=o(1),h=(o(69),o(81),o(49),o(15),o(82),o(37),o(48),o(95)),l=o.n(h),c=o(993),f=function(){function t(e,o){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{top:20,bottom:0,left:30,right:30},head=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{top:20,bottom:10},h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{top:20,bottom:20};Object(r.a)(this,t),this.pdf=d,this.domEachEndSum=1,this.head=head,this.foot=h,this.ele=e,this.ele.style.width="595px",this.pdfFileName=o,this.A4_WIDTH=595,this.A4_HEIGHT=842,this.pageHeight=0,this.pageNum=1,this.filtersClass=n,this.init=0}var e,o;return Object(d.a)(t,[{key:"getPDF",value:(o=Object(n.a)(regeneratorRuntime.mark((function t(e){var o,r,d,h,f,m,i,v,y,E,H,canvas,x,w,N,D,C=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=this.ele,r=this.pdfFileName,d=o.offsetWidth,h=o.scrollHeight,f=Math.ceil(d/70),m=Math.ceil(h/70),i=0;i<f;i++)for(v=0;v<m;v++)(y=document.createElement("div")).className="shuiyin-box",y.innerHTML='<div class="shuiyin">hsueh</div>',y.style.top=70*v+"px",y.style.left=70*i+"px",this.ele.appendChild(y);E=o.offsetTop,H=o.offsetLeft,canvas=document.createElement("canvas"),x=0,w=document.documentElement.clientWidth||document.body.clientWidth,(N=window.innerWidth)>w&&(x=(N-w)/2),canvas.width=2*d,canvas.height=2*h,(D=canvas.getContext("2d")).scale(2,2),D.translate(-H-x,-E),l()(o,{useCORS:!0}).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(canvas){var o,n,d,h,l,f,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=canvas.width,n=canvas.height,C.pageHeight=o/C.A4_WIDTH*C.A4_HEIGHT,d=n,h=0,l=C.A4_WIDTH-10,f=C.A4_WIDTH/o*n,m=canvas.toDataURL("image/jpeg",1),v=Object(c.a)("","pt","a4"),d<C.pageHeight)v.addImage(m,"JPEG",5,0,l,f);else for(;d>0;)v.addImage(m,"JPEG",5,h,l,f),d-=C.pageHeight,h-=C.A4_HEIGHT,d>0&&v.addPage();v.save(r+".pdf",{returnPromise:!0}).then((function(){for(var t=document.querySelectorAll(".pdf-empty"),o=0;o<t.length;o++)t[o].remove();for(var n=document.querySelectorAll(".pdf-foot"),r=0;r<n.length;r++)n[r].remove();for(var head=document.querySelectorAll(".pdf-head"),d=0;d<head.length;d++)head[d].remove();for(var h=document.querySelectorAll(".shuiyin-box "),l=0;l<h.length;l++)h[l].remove();C.ele.style.height="",C.ele.style.padding="",C.ele.style.width="",e()}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 20:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"outPutPdfFn",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(e){var o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=o.ele.getBoundingClientRect();o.pageHeight=r.width/o.A4_WIDTH*o.A4_HEIGHT,o.ele.style.height="initial",o.ele.style.padding="".concat(o.pdf.top,"px ").concat(o.pdf.right,"px ").concat(o.pdf.bottom,"px ").concat(o.pdf.left,"px"),e&&(o.pdfFileName=e),o.pageNum=1,o.domEach(o.ele),o.domEachEnd(o.ele),o.getPDF(t,n)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"domEach",value:function(t){var e=this;t.childNodes.forEach((function(o,n){if(!e.filtersClass.map((function(t){return e.hasClass(o,t)})).includes(!0)){var r=o.parentNode;if(0==e.init){if(e.head.top-e.pdf.top<0)throw new Error("head顶部距离请大于pdf顶部距离");return e.addHeaderDiv(o,r,e.head.top-e.pdf.top),e.init++,void e.domEach(t)}if(o.getBoundingClientRect){var d=e.ele.getBoundingClientRect(),h=o.getBoundingClientRect();if((e.hasClass(o,"line")||!o.childNodes||0===o.childNodes.length)&&h.height+40+e.head.top+e.head.bottom+e.foot.top+e.foot.bottom+-e.pageHeight>0)throw new Error("单行不允许超过A4纸高度！");var l=h.bottom-d.top,c=h.top-d.top;if(l-e.pageNum*parseInt(e.pageHeight)+(e.foot.top+e.foot.bottom+20+30)>=0){var f=e.pageNum*parseInt(e.pageHeight)-c,m=e.pageNum*parseInt(e.pageHeight)-l;if(m>=e.foot.top+e.foot.bottom+20){var v=o.parentNode,y=e.addEmptyDiv(o.nextSibling,m-(e.foot.top+e.foot.bottom+20),v),E=e.addFootDiv(y.nextSibling,v);return e.addHeaderDiv(E.nextSibling,v),e.pageNum++,void e.domEach(t)}if(e.hasClass(o,"line")||!o.childNodes||0===o.childNodes.length){var H=o.parentNode;e.addEmptyDiv(o,f-(e.foot.top+e.foot.bottom+20),H),e.addFootDiv(o,H);return e.addHeaderDiv(o,H),e.pageNum++,void e.domEach(t)}}}o.childNodes.length&&e.domEach(o)}}))}},{key:"domEachEnd",value:function(){var t=this.ele,e=this.ele.childNodes,o=e[e.length-this.domEachEndSum];if(o.getBoundingClientRect){if(this.foot.bottom-this.pdf.bottom<0)throw new Error("foot底部距离请大于pdf底部距离");var n=o.getBoundingClientRect(),r=this.ele.getBoundingClientRect(),d=n.bottom-r.top,h=this.pageNum*parseInt(this.pageHeight)-d,l=this.addEmptyDiv(this.ele.nextSibling,h-(this.foot.top+this.foot.bottom-this.pdf.bottom+20),t);this.addFootDiv(l.nextSibling,t,null,this.foot.bottom-this.pdf.bottom)}else this.domEachEndSum++,this.domEachEnd()}},{key:"addEmptyDiv",value:function(t,e,o){var n=document.createElement("div");return n.className="pdf-empty",n.style.background="white",n.style.height=e+"px",n.style.width="100%",o.insertBefore(n,t),n}},{key:"addFootDiv",value:function(t,e,o,n){var r=o;0==r||r||(r=this.foot.top);var d=n;0==d||d||(d=this.foot.bottom);var h=document.createElement("div");return h.className="pdf-foot",h.innerHTML="第"+this.pageNum+" 页",h.style.paddingTop=r+"px",h.style.fontSize="12px",h.style.textAlign="center",h.style.lineHeight="20px",h.style.paddingBottom=d+"px",e.insertBefore(h,t),h}},{key:"addHeaderDiv",value:function(t,e,o,n){var r=o;0==r||r||(r=this.head.top);var d=n;0==d||d||(d=this.head.bottom);var h=document.createElement("div");return h.className="pdf-head",h.innerHTML="hsueh"+" - ".concat((new Date).getFullYear(),"年").concat((new Date).getMonth()+1,"月"),h.style.paddingTop=r+"px",h.style.lineHeight="15px",h.style.borderBottom="1px solid #ccc",h.style.fontSize="12px",h.style.paddingBottom="4px",h.style.marginBottom=d+"px",e.insertBefore(h,t),h}},{key:"hasClass",value:function(element,t){return(""+element.className).indexOf(""+t)>-1}}]),t}();e.a=function(t,e){return new f(e,t,["shuiyinBox"]).outPutPdfFn(t)}},992:function(t,e,o){t.exports=o.p+"img/GitHub.cb120a5.png"}}]);